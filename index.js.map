{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n//: змінна опцій HTTPS запиту\nconst server = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '53374429-639c77152d70b3fe75f006246',\n    q: '',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  },\n});\n\n//: ф-я HTTPS запиту\nexport function getImagesByQuery(query) {\n  return server.get('', {\n    params: {\n      q: query,\n    },\n  });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport Granim from 'granim';\n//: пошук елементів DOM\nlet refs = {\n  galleryElem: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n};\nconst { galleryElem, loader } = refs;\n\nconsole.log(loader);\n\n//: змінна загрузки\n// let loader = null;\n\n//: ф-я темплеуйту розмітки\nfunction imageTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  let tagsText = tags.split(',').slice(0, 3);\n\n  return `\n  <li class=\"list-item\">\n        <div class=\"item-container\">\n        <a href=\"${largeImageURL}\" class=\"\">\n          <img src=\"${webformatURL}\" alt=\"${tagsText}\" class=\"item-img\">\n          </a>\n          <div class=\"desc-container\">\n            <p class=\"item-title\">Likes <span item-num>${likes}</span></p>\n            <p class=\"item-title\">Views <span item-num>${views}</span></p>\n            <p class=\"item-title\">Comments <span item-num>${comments}</span></p>\n            <p class=\"item-title\">Downloads <span item-num>${downloads}</span></p>\n          </div>\n        </div>\n      </li>`;\n}\n\n//: ф-я рендеру розмітки\nexport function createGallery(images) {\n  const markup = images.map(imageTemplate).join('');\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n    overlayOpacity: 0.85,\n  });\n  galleryElem.innerHTML = markup;\n  lightbox.refresh();\n  return markup;\n}\n\n//: ф-я очистки галереї\nexport function clearGallery() {\n  galleryElem.innerHTML = '';\n}\n\n//: ф-я запуску загрузки\nexport function showLoader() {\n  if (!loader.classList.contains('isActive')) {\n    loader.classList.add('isActive');\n  }\n}\n\n//: ф-я виключення загрузки\nexport function hideLoader() {\n  if (loader.classList.contains('isActive')) {\n    setTimeout(() => {\n      loader.classList.remove('isActive');\n    }, 700);\n  }\n}\n//: ф-я виключення загрузки\nexport function hideLoaderLonger() {\n  if (loader.classList.contains('isActive')) {\n    setTimeout(() => {\n      loader.classList.remove('isActive');\n    }, 5000);\n  }\n}\n\n//: ф-я стилізації фону\nexport function loadGranim() {\n  let granimInstance = new Granim({\n    element: '#granim-canvas',\n    name: 'granim',\n    opacity: [1, 1],\n    states: {\n      'default-state': {\n        gradients: [\n          ['#834D9B', '#D04ED6'],\n          ['#1CD8D2', '#93EDC7'],\n        ],\n      },\n    },\n  });\n  return;\n}\n","import './scss/main.scss';\nimport iziToast from 'izitoast';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  hideLoaderLonger,\n  loadGranim,\n} from './js/render-functions';\n\n//: пошук DOM елементів\nconst refs = {\n  form: document.querySelector('.form'),\n};\n\n//: деструктуризація\nconst { form } = refs;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  loadGranim();\n});\n\n//: прослуховувач submit\nform.addEventListener('submit', evt => {\n  evt.preventDefault();\n\n  showLoader();\n  const formData = new FormData(form);\n  const query = formData.get('search-text').trim();\n\n  if (query === '') {\n    hideLoaderLonger();\n\n    clearGallery();\n    form.reset();\n    return iziToast.show({\n      messageSize: '20',\n      message: `Будь ласка введіть назву фото!`,\n      position: 'center',\n      close: true,\n      closeOnEscape: true,\n      theme: 'light',\n      color: 'yellow',\n    });\n  }\n\n  clearGallery();\n  form.reset();\n\n  //: Проміс\n  getImagesByQuery(query)\n    .then(res => {\n      const dataArr = res.data.hits;\n\n      if (dataArr.length === 0) {\n        return Promise.reject();\n      }\n      createGallery(dataArr);\n      loadGranim();\n      hideLoader();\n    })\n    .catch(() => {\n      hideLoaderLonger();\n      iziToast.show({\n        messageSize: '20',\n        message: `На жаль, немає зображень, що відповідають вашому пошуковому запиту. Спробуйте ще раз!`,\n        position: 'center',\n        close: true,\n        closeOnEscape: true,\n        theme: 'light',\n        color: 'orange',\n      });\n    });\n});\n"],"names":["server","axios","getImagesByQuery","query","refs","galleryElem","loader","imageTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","tagsText","createGallery","images","markup","lightbox","SimpleLightbox","clearGallery","showLoader","hideLoader","hideLoaderLonger","loadGranim","Granim","form","evt","iziToast","res","dataArr"],"mappings":"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"}