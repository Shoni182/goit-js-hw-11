{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst server = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '53374429-639c77152d70b3fe75f006246',\n    q: '',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  },\n});\n\nexport function getImagesByQuery(query) {\n  return server.get('', {\n    params: {\n      q: query,\n    },\n  });\n}\n","import SimpleLightbox from 'simplelightbox';\n\nlet refs = {\n  galleryElem: document.querySelector('.gallery'),\n};\nconst { galleryElem } = refs;\n\nlet loader = null;\n\nfunction imageTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  let tagsText = tags.split(',').slice(0, 3);\n\n  return `\n  <li class=\"list-item\">\n        <div class=\"item-container\">\n        <a href=\"${largeImageURL}\" class=\"\">\n          <img src=\"${webformatURL}\" alt=\"${tagsText}\" class=\"item-img\">\n          </a>\n          <div class=\"desc-container\">\n            <p class=\"item-title\">Likes <span item-num>${likes}</span></p>\n            <p class=\"item-title\">Views <span item-num>${views}</span></p>\n            <p class=\"item-title\">Comments <span item-num>${comments}</span></p>\n            <p class=\"item-title\">Downloads <span item-num>${downloads}</span></p>\n          </div>\n        </div>\n      </li>`;\n}\n\nexport function createGallery(images) {\n  const markup = images.map(imageTemplate).join('');\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n    overlayOpacity: 0.85,\n  });\n  galleryElem.innerHTML = markup;\n  lightbox.refresh();\n  return markup;\n}\n\nexport function clearGallery() {\n  galleryElem.innerHTML = '';\n}\n\nexport function showLoader() {\n  if (!loader) {\n    const markup = `<div class=\"loader\"></div>`;\n    galleryElem.insertAdjacentHTML('beforebegin', markup);\n    loader = document.querySelector('.loader');\n  }\n}\n\nexport function hideLoader() {\n  if (loader) {\n    loader.remove();\n    loader = null;\n  }\n}\n","import './scss/main.scss';\nimport Granim from 'granim';\nimport iziToast from 'izitoast';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n} from './js/render-functions';\n\nlet granimInstance = new Granim({\n  element: '#granim-canvas',\n  name: 'granim',\n  opacity: [1, 1],\n  states: {\n    'default-state': {\n      gradients: [\n        ['#834D9B', '#D04ED6'],\n        ['#1CD8D2', '#93EDC7'],\n      ],\n    },\n  },\n});\n\nconst refs = {\n  form: document.querySelector('.form'),\n};\n\nconst { form } = refs;\n\nform.addEventListener('submit', evt => {\n  evt.preventDefault();\n  showLoader();\n\n  window.addEventListener('resize', function () {\n    // Цей метод змушує Granim перерахувати розміри canvas\n    // і оновити градієнт відповідно до нових розмірів.\n    granimInstance.changeSize();\n  });\n\n  const formData = new FormData(form);\n  const query = formData.get('search-text').trim();\n\n  clearGallery();\n  form.reset();\n\n  getImagesByQuery(query)\n    .then(res => {\n      const animArr = res.data.hits;\n      if (animArr.length === 0) {\n        return Promise.reject(error);\n      }\n      createGallery(animArr);\n      hideLoader();\n    })\n    .catch(error => {\n      hideLoader();\n      iziToast.show({\n        messageSize: '20',\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        position: 'center',\n        close: true,\n        closeOnEscape: true,\n        theme: 'light',\n        color: 'red',\n      });\n    });\n});\n"],"names":["server","axios","getImagesByQuery","query","refs","galleryElem","loader","imageTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","tagsText","createGallery","images","markup","lightbox","SimpleLightbox","clearGallery","showLoader","hideLoader","granimInstance","Granim","form","evt","res","animArr","error","iziToast"],"mappings":"2wBAEA,MAAMA,EAASC,EAAM,OAAO,CAC1B,QAAS,2BACT,OAAQ,CACN,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACH,CAAC,EAEM,SAASC,EAAiBC,EAAO,CACtC,OAAOH,EAAO,IAAI,GAAI,CACpB,OAAQ,CACN,EAAGG,CACJ,CACL,CAAG,CACH,CCjBA,IAAIC,EAAO,CACT,YAAa,SAAS,cAAc,UAAU,CAChD,EACA,KAAM,CAAE,YAAAC,CAAa,EAAGD,EAExB,IAAIE,EAAS,KAEb,SAASC,EAAc,CACrB,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,IAAIC,EAAWL,EAAK,MAAM,GAAG,EAAE,MAAM,EAAG,CAAC,EAEzC,MAAO;AAAA;AAAA;AAAA,mBAGUD,CAAa;AAAA,sBACVD,CAAY,UAAUO,CAAQ;AAAA;AAAA;AAAA,yDAGKJ,CAAK;AAAA,yDACLC,CAAK;AAAA,4DACFC,CAAQ;AAAA,6DACPC,CAAS;AAAA;AAAA;AAAA,YAItE,CAEO,SAASE,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EAAO,IAAIV,CAAa,EAAE,KAAK,EAAE,EAC1CY,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,gBAAiB,SACjB,aAAc,IACd,eAAgB,GACpB,CAAG,EACD,OAAAf,EAAY,UAAYa,EACxBC,EAAS,QAAO,EACTD,CACT,CAEO,SAASG,GAAe,CAC7BhB,EAAY,UAAY,EAC1B,CAEO,SAASiB,GAAa,CACtBhB,IAEHD,EAAY,mBAAmB,cADhB,4BACqC,EACpDC,EAAS,SAAS,cAAc,SAAS,EAE7C,CAEO,SAASiB,GAAa,CACvBjB,IACFA,EAAO,OAAM,EACbA,EAAS,KAEb,CCvDA,IAAIkB,EAAiB,IAAIC,EAAO,CAC9B,QAAS,iBACT,KAAM,SACN,QAAS,CAAC,EAAG,CAAC,EACd,OAAQ,CACN,gBAAiB,CACf,UAAW,CACT,CAAC,UAAW,SAAS,EACrB,CAAC,UAAW,SAAS,CACtB,CACF,CACF,CACH,CAAC,EAED,MAAMrB,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,CACtC,EAEM,CAAE,KAAAsB,CAAM,EAAGtB,EAEjBsB,EAAK,iBAAiB,SAAUC,GAAO,CACrCA,EAAI,eAAc,EAClBL,IAEA,OAAO,iBAAiB,SAAU,UAAY,CAG5CE,EAAe,WAAU,CAC7B,CAAG,EAGD,MAAMrB,EADW,IAAI,SAASuB,CAAI,EACX,IAAI,aAAa,EAAE,KAAI,EAE9CL,IACAK,EAAK,MAAK,EAEVxB,EAAiBC,CAAK,EACnB,KAAKyB,GAAO,CACX,MAAMC,EAAUD,EAAI,KAAK,KACzB,GAAIC,EAAQ,SAAW,EACrB,OAAO,QAAQ,OAAO,KAAK,EAE7Bb,EAAca,CAAO,EACrBN,GACN,CAAK,EACA,MAAMO,GAAS,CACdP,IACAQ,EAAS,KAAK,CACZ,YAAa,KACb,QAAS,2EACT,SAAU,SACV,MAAO,GACP,cAAe,GACf,MAAO,QACP,MAAO,KACf,CAAO,CACP,CAAK,CACL,CAAC"}